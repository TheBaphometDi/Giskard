# Тестирование Gemini 2.0 Flash с Giskard

Программа для автоматического тестирования модели Gemini 2.0 Flash с использованием Giskard для оценки качества ответов на вопросы по роману "Мастер и Маргарита".

## Возможности

- Автоматический выбор значимых отрывков из "Мастера и Маргариты"
- Генерация 20 разнообразных вопросов для тестирования
- Получение ответов от модели Gemini 2.0 Flash
- Комплексная оценка качества с помощью Giskard
- Расширенные метрики производительности
- Автоматическое сохранение результатов в JSON файл

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `Key.json` с API ключом Gemini:
```json
{
    "gemini_api_key": "ваш_ключ_gemini"
}
```

## Использование

Запустите программу:
```bash
python Main.py
```

## Тесты Giskard

Программа использует следующие тесты Giskard:

- **Data Uniqueness** - проверка уникальности ответов
- **Data Completeness** - проверка полноты данных
- **Valid Values** - проверка валидности значений
- **Data Correlation** - проверка корреляции между вопросами и ответами
- **Outlier Value** - выявление выбросов в данных

## Метрики

Программа рассчитывает следующие метрики:

- Средняя оценка качества ответов
- Минимальная и максимальная оценки
- Стандартное отклонение
- Количество высококачественных ответов (≥0.8)
- Количество средних ответов (0.6-0.8)
- Количество низких ответов (<0.6)
- Средняя длина ответов
- Коэффициент уникальности ответов

## Результаты

Результаты сохраняются в файл `gemini_test_results_YYYYMMDD_HHMMSS.json` со следующей структурой:

```json
{
    "excerpt": "текст отрывка",
    "questions_and_answers": [
        {
            "question": "вопрос",
            "reference_answer": "эталонный ответ",
            "model_answer": "ответ модели",
            "score": 0.85
        }
    ],
    "metrics": {
        "average_score": 0.84,
        "min_score": 0.80,
        "max_score": 0.85
        
    },
    "giskard_results": {
        "total_tests": 5,
        "passed_tests": 4,
        "failed_tests": 1
    }
}
```

## Управление квотами

Программа использует `time.sleep(10)` между запросами к Gemini API для предотвращения превышения лимитов.

## Требования

- Python 3.8+
- Google Generative AI API ключ
- Giskard
- Pandas

## Структура проекта

```
PythonProject/
├── Main.py              # Основная программа
├── Key.json             # API ключи
├── requirements.txt     # Зависимости
├── README.md           # Документация
└── gemini_test_results_*.json  # Результаты тестирования
``` 